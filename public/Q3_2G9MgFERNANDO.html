<!DOCTYPE html>
<html> 
    <head> 
        <title>DESIGNING AN HTML FORM</title>
        <style> 
            body{
                padding: 1rem;
                font-family: Karla, sans-serif;
                background-color: #aceff1;
            }
            h1{
                text-align: center;
                color: #072b55;
            }
            form{
                background-color: #d1bdeb;
                padding: 1rem;
                border-radius: 6px;
                box-shadow: 0 0 10px black;
            }
            fieldset{
                padding: 1rem;
                margin-bottom: 1rem;
                border-radius: 7px;
                border: 2px solid #072b55; 
            }
            legend{
                font-weight: bold;
                color: #072b55;
            }
        </style>
    </head>

    <body>
            <h1>Application Form</h1>
            <form method="post" onsubmit="return saveSignup(event)" onreset="return willReset()">

                <fieldset form="studentBasicInfo">
                    <legend>Student Basic Information</legend>
                        <label for="StudentID">StudentID: </label>
                        <input type="number" id ="studentID" name="studentID" min="1" max="10000" required
                        onfocus="highlight(this)" onblur="checkInput(this)" >
                        <br><br>
                        <label for="FullName">Full Name: </label>
                        <input type="text" id="fullName" name="fullName" required>
                        <br><br>
                        <label for="Birthday">Birthday: </label>
                        <input type="date" id="birthday" name="birthday" required>
                        <br><br>
                        <label for="Email">Email Address: </label>
                        <input type="email" id="email" name="email" required>
                        <br><br>
                </fieldset>
                <fieldset form="studentSchoolInfo">
                    <legend>Student School Information</legend>
                        <label for="Number">Mobile Phone: </label>
                        <input type="text" id ="mobilePhone" name="mobilePhone" required>
                        <br><br>
                        <label for="Grade">Grade Level: </label>
                        <select name="gradeLevel" id="grade"  required onchange="gradedChange(this)">
                            <option value="Kinder"> Kinder</option>
                            <option value="Grade 1"> Grade 1</option>
                            <option value="Grade 2"> Grade 2</option>
                            <option value="Grade 3"> Grade 3</option>
                            <option value="Grade 4"> Grade 4</option>
                            <option value="Grade 5"> Grade 5</option>
                            <option value="Grade 6"> Grade 6</option>
                            <option value="Grade 7"> Grade 7</option>
                            <option value="Grade 8"> Grade 8</option>
                            <option value="Grade 9"> Grade 9</option>
                            <option value="Grade 10"> Grade 10</option> 
                            <option value="Grade 11"> Grade 11</option>
                            <option value="Grade 12"> Grade 12</option>
                            <option value="College"> College</option>
                        </select>
                        <br>
                        <p>Intern/Extern</p>
                            <input type="radio" id="intern" name="intEx" value="Intern" required>
                            <label for="intern">Intern</label>
                            <input type="radio" id="extern" name="intEx" value="Extern"  required>
                            <label for="extern">Extern</label>
                        <br><br>
                        <label for="Club">Preferred Organization/Club: </label>
                        <select name="clubs" id="clubs" required>
                            <option value="Loqui"> Loqui</option>
                            <option value="ATOM"> ATOM</option>
                            <option value="Math Club"> Math Club</option>
                            <option value="Astrosoc"> Astrosoc</option>
                            <option value="AKSIS"> AKSIS</option>
                            <option value="Sapienara"> Sapienara</option>
                            <option value="Likha"> Likha</option>
                            <option value="Himig Agham"> Himig Agham</option>
                            <option value="Alianti"> Alianti</option>
                            <option value="Tomorrow"> Tomorrow</option>
                            <option value="Karyo Biomedical Society"> Karyo Biomedical Society</option> 
                            <option value="Volant"> Volant</option>
                            <option value="Kislap"> Kislap</option>
                            <option value="CARE"> CARE</option>
                        </select>
                        <br><br>
                        <label for="joinin">Why Join Us? : </label>
                        <textarea id="tArea" name="WhyJoinUs" rows="6" cols="67"  required></textarea>
                        <br><br>
                    </fieldset>
                    <fieldset form="actionButtons">

                        <legend> Action Buttons </legend>
                            <input type="submit" value="Submit Application" >
                            <input type="reset" value="Reset Response" >
                            <button type="button" onclick="viewSignups()"> View Signups </button>
                    </fieldset>

            </form>

        <script>

            function saveSignup(event){ // run form
                event.preventDefault();//prevent default page refresh behaviour when the user submits

                if(!confirm("Are you sure you want to submit the application?")){ //simple ask to confirm question before saving data
                    return false;
                }
                let signup={//create object to store all data input values
                    studentID: document.getElementById("studentID").value,
                    fullName: document.getElementById("fullName").value,
                    birthday: document.getElementById("birthday").value,
                    email: document.getElementById("email").value,
                    mobilePhone: document.getElementById("mobilePhone").value,
                    gradeLevel: document.getElementById("grade").value,
                    internExtern: document.querySelector('input[name="intEx"]:checked').value,
                    club: document.getElementById("clubs").value,
                    whyJoin: document.getElementById("tArea").value
                }

                let signups=localStorage.getItem("signups");//read existing data from localStorage
                if(signups){//if there is existing data, convert JSON string back into an array
                    signups = JSON.parse(signups);
                }
                else{//if there is no data, create an empty array
                    signups=[];
                }

                signups.push(signup);//add new signup object into the array

                localStorage.setItem("signups", JSON.stringify(signups));//save updated array into localStorage as a string using stringify

                alert("Signup saved!"); //confirmation message
                alert("Thank you " + signup.fullName + " for submitting your application!");

                return false; //prevent page reload
            }

            function willReset(){
                return confirm("Are you sure you want to reset your answers?");
            }

            function highlight(element){
                element.style.background = "#4a6deb";
                element.style.color = "white";
            }

            function checkInput(element){
                element.style.background = "";
                element.style.color="";
            }

            function gradedChange(element){
                alert("You selected: " + element.value + "!");
            }

            function viewSignups(){
                window.location.href = "viewSignups.html";
            }

        </script>

    </body>
</html>